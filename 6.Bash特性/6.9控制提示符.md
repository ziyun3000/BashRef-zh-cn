## 6.9 提示符控制（Controlling the Pormpt）

Bash在每次打印首要提示符之前，会检查数组变量PROMPT_COMMANDS的值。如果PROMPT_COMMANDS中的任意元素设置了非空值，Bash会按序号执行每一个值，就像在命令行键入一样。

除此之外，还有在下列表中描述的特殊字符是可以出现在变量PS0、PS1、PS2和PS4中：

特殊字符 | 含义
--- | ---
\a | 响铃字符。
\d | “Weekday Month Date”格式的日期（例如，“Tue May 26”）。
\D{*format*} | “*format*”所代表的格式传入**strftime(3)**并且将返回的结果插入到提示符字符串中；一个空的“*format*”会使用指定的本地时间表示。大括号是必须的。
\e | 一个转义字符。
\h | 在第一个“.”之前的主机名。
\H | 主机名。
\j | 当前由shell管理的作业数量。
\l | shell终端设备名中的基础名称。
\n | 一个新行。
\r | 一个回车。
\s | shell的名称，变量$0的基础名称（在最终斜线后面的部分）。
\t | 24小时时间格式“HH:MM:SS”。
\T | 12小时时间格式“HH:MM:SS”。
\@ | 12小时时间格式“am/pm”。
\A | 24小时时间格式“HH:MM”。
\u | 当前用户的用户名。
\v | Bash版本号（例如，2.00）。
\V | Bash版本号加补丁级别（例如，2.00.0）。
\w | 当前工作目录，代表$HOME时使用波浪号缩略。
\W | $PWD的基础名称，代表$HOME时使用波浪号缩略。
\\! | 该命令的历史编号。
\\# | 该命令的命令编号。
\$ | 如果有效uid是0，则代表#号，否则代表$符号。
\nnn | 八进制值“nnn”代表的ASCII码的字符。
\\\\ | 一个反斜线。
\\[ | 非打印字符的序列起始。其常用于在提示符中内嵌一个终端控制序列。
\\] | 非打印字符的序列结束。

命令编号和历史编号通常是不同的：一个命令的历史编号是其在历史列表中的位置。历史列表可能包含了从历史文件（参见9.1《Bash历史工具》）中恢复的命令。而命令编号是在当前shell会话中执行了的命令序列中的位置。

在字符串解码之后，其遵从shell选项“promptvars”（参见4.3.2《内建命令shopt》）的值，可通过参数扩展、命令替换、算术扩展和引用移除进行扩展。如果字符串的转义部分出现在命令替换内部或包含单词扩展的特殊字符，其会产生副作用。